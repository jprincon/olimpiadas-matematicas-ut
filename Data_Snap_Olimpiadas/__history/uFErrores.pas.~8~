unit uFErrores;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, SynEdit, Vcl.Buttons, Vcl.ComCtrls,
  Vcl.ExtCtrls, SynEditHighlighter, SynHighlighterGeneral, uBackupModule,
  FireDAC.Stan.Intf, FireDAC.Stan.Option, FireDAC.Stan.Param,
  FireDAC.Stan.Error, FireDAC.DatS, FireDAC.Phys.Intf, FireDAC.DApt.Intf,
  FireDAC.Stan.Async, FireDAC.DApt, Data.DB, FireDAC.Comp.DataSet,
  FireDAC.Comp.Client;

type
  TFErrores = class(TForm)
    LvErrores: TListView;
    Panel1: TPanel;
    PageControl1: TPageControl;
    TabSheet1: TTabSheet;
    Panel2: TPanel;
    Panel3: TPanel;
    snLeerErrores: TSpeedButton;
    SpeedButton1: TSpeedButton;
    seError: TSynEdit;
    SynGeneralSyn1: TSynGeneralSyn;
    Query: TFDQuery;
    procedure FormCreate(Sender: TObject);
    procedure LvErroresClick(Sender: TObject);
    procedure snLeerErroresClick(Sender: TObject);
    procedure SpeedButton1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FErrores: TFErrores;

implementation

{$R *.dfm}

procedure TFErrores.FormCreate(Sender: TObject);
begin
  Height := 768;
  Width := round(1.618 * Height);

  seError.Lines.Clear;
end;

procedure TFErrores.LvErroresClick(Sender: TObject);
begin
  if LvErrores.Selected <> nil then
  begin
    seError.Lines.Clear;
    seError.Lines.Add(LvErrores.Selected[5]);
    seError.Lines.Add('');
    seError.Lines.Add(LvErrores.Selected[6]);
  end;
end;

procedure TFErrores.snLeerErroresClick(Sender: TObject);
var
  i: integer;
begin
  Query.Close;
  Query.SQL.Text := 'SELECT * FROM Errores';
  Query.Open;

  LvErrores.Items.Clear;

  for i := 1 to Query.RecordCount do
  begin
    with LvErrores.Items.Add.SubItems do
    begin
      Add(IntToStr(i));
      Add(Query.FieldByName('IdError').AsString);
      Add(Query.FieldByName('Hora').AsString);
      Add(Query.FieldByName('Fecha').AsString);
      Add(Query.FieldByName('Procedimiento').AsString);
      Add(Query.FieldByName('Datos').AsString);
      Add(Query.FieldByName('Error').AsString);
    end;

    Query.Next;
  end;
end;

procedure TFErrores.SpeedButton1Click(Sender: TObject);
begin
  if LvErrores.Selected <> nil then
  begin

  end;
end;

end.
